'use strict';function _0x5e35(_0x3a05ad,_0x2df687){const _0xa4f9ae=_0xa4f9();return _0x5e35=function(_0x5e35cd,_0x2805de){_0x5e35cd=_0x5e35cd-0xfe;let _0x18c5b0=_0xa4f9ae[_0x5e35cd];return _0x18c5b0;},_0x5e35(_0x3a05ad,_0x2df687);}const _0x50f0c1=_0x5e35;function _0xa4f9(){const _0x46b71e=['@clickhouse/client','design:paramtypes','4782fNdoML','error','data','ClickhouseService','metadata','logger','createClient','query','isArray','length','object','554175XOxdCc','860GBeNZR','__esModule','20513448ZjaqUj','command','12227600udwrIY','42raAkfM','239283kDonZr','54960iJjetK','18818ZxHhpo','defineProperty','singleQuery','json','232hBXmYZ','97McBvlg','3124smUhDy','decorate','JSONEachRow','client','__decorate','insert','Logger','@nestjs/common'];_0xa4f9=function(){return _0x46b71e;};return _0xa4f9();}(function(_0x3782d8,_0x55e126){const _0x2229a9=_0x5e35,_0xb2d30d=_0x3782d8();while(!![]){try{const _0x424af7=-parseInt(_0x2229a9(0xfe))/0x1*(-parseInt(_0x2229a9(0x11d))/0x2)+parseInt(_0x2229a9(0x109))/0x3*(-parseInt(_0x2229a9(0x115))/0x4)+parseInt(_0x2229a9(0x114))/0x5*(-parseInt(_0x2229a9(0x11a))/0x6)+parseInt(_0x2229a9(0x119))/0x7+parseInt(_0x2229a9(0x121))/0x8*(-parseInt(_0x2229a9(0x11b))/0x9)+parseInt(_0x2229a9(0x11c))/0xa*(-parseInt(_0x2229a9(0xff))/0xb)+parseInt(_0x2229a9(0x117))/0xc;if(_0x424af7===_0x55e126)break;else _0xb2d30d['push'](_0xb2d30d['shift']());}catch(_0x5da727){_0xb2d30d['push'](_0xb2d30d['shift']());}}}(_0xa4f9,0xe03d5));var __decorate=this&&this[_0x50f0c1(0x103)]||function(_0xf82911,_0x529ece,_0x30f678,_0x28de58){const _0xa595ee=_0x50f0c1;var _0x35c84e=arguments[_0xa595ee(0x112)],_0x5b65ae=_0x35c84e<0x3?_0x529ece:_0x28de58===null?_0x28de58=Object['getOwnPropertyDescriptor'](_0x529ece,_0x30f678):_0x28de58,_0x525ba3;if(typeof Reflect===_0xa595ee(0x113)&&typeof Reflect[_0xa595ee(0x100)]==='function')_0x5b65ae=Reflect['decorate'](_0xf82911,_0x529ece,_0x30f678,_0x28de58);else{for(var _0x269d4a=_0xf82911['length']-0x1;_0x269d4a>=0x0;_0x269d4a--)if(_0x525ba3=_0xf82911[_0x269d4a])_0x5b65ae=(_0x35c84e<0x3?_0x525ba3(_0x5b65ae):_0x35c84e>0x3?_0x525ba3(_0x529ece,_0x30f678,_0x5b65ae):_0x525ba3(_0x529ece,_0x30f678))||_0x5b65ae;}return _0x35c84e>0x3&&_0x5b65ae&&Object[_0xa595ee(0x11e)](_0x529ece,_0x30f678,_0x5b65ae),_0x5b65ae;},__metadata=this&&this['__metadata']||function(_0x2833e0,_0x5bf53b){const _0x34b7f1=_0x50f0c1;if(typeof Reflect===_0x34b7f1(0x113)&&typeof Reflect[_0x34b7f1(0x10d)]==='function')return Reflect[_0x34b7f1(0x10d)](_0x2833e0,_0x5bf53b);},ClickhouseService_1;Object['defineProperty'](exports,_0x50f0c1(0x116),{'value':!![]}),exports[_0x50f0c1(0x10c)]=void 0x0;const common_1=require(_0x50f0c1(0x106)),client_1=require(_0x50f0c1(0x107)),obj_utils_1=require('../../utils/obj.utils');let ClickhouseService=ClickhouseService_1=class ClickhouseService{constructor(_0x4f4686){const _0x4f36cb=_0x50f0c1;this['options']=_0x4f4686,this['logger']=new common_1[(_0x4f36cb(0x105))](ClickhouseService_1['name']),this[_0x4f36cb(0x102)]=(0x0,client_1[_0x4f36cb(0x10f)])(_0x4f4686);}async[_0x50f0c1(0x118)](_0x11f2ee){const _0x38c7f1=_0x50f0c1;try{return await this[_0x38c7f1(0x102)][_0x38c7f1(0x118)]({'query':_0x11f2ee}),!![];}catch(_0x3610f8){return this['logger'][_0x38c7f1(0x10a)](_0x3610f8),![];}}async[_0x50f0c1(0x110)](_0x27417c){const _0x5cc324=_0x50f0c1,_0xe78c0d=await this['client']['query']({'query':_0x27417c}),_0x2db27f=await _0xe78c0d['json'](),_0x2eac98=_0x2db27f[_0x5cc324(0x10b)];return(0x0,obj_utils_1['isEmpty'])(_0x2eac98)?[]:_0x2eac98;}async[_0x50f0c1(0x11f)](_0x308bc8){const _0x3833ca=_0x50f0c1,_0x5a9721=await this['client'][_0x3833ca(0x110)]({'query':_0x308bc8}),_0x1e11e0=await _0x5a9721[_0x3833ca(0x120)](),_0x536f13=_0x1e11e0['data'];if(Array[_0x3833ca(0x111)](_0x536f13)&&_0x536f13[_0x3833ca(0x112)]==0x1)return _0x536f13[0x0];return _0x536f13;}async[_0x50f0c1(0x104)](_0xee3f15,_0x584c9f){const _0x2b16ff=_0x50f0c1;try{return await this[_0x2b16ff(0x102)][_0x2b16ff(0x104)]({'table':_0xee3f15,'values':_0x584c9f,'format':_0x2b16ff(0x101)}),{'success':!![]};}catch(_0x504529){return this[_0x2b16ff(0x10e)]['error'](_0x504529),{'success':![]};}}};ClickhouseService=ClickhouseService_1=__decorate([(0x0,common_1['Injectable'])(),__metadata(_0x50f0c1(0x108),[Object])],ClickhouseService),exports[_0x50f0c1(0x10c)]=ClickhouseService;